{"ast":null,"code":"import{create}from'zustand';import axios from'axios';// Set your API endpoints\nconst USER_API=\"https://gessamusystem1.vercel.app/auth\";const ADM_API=\"https://gessamubackend.onrender.com/admin\";export const useAuthStore=create(set=>({user:null,isAuthenticated:false,isLoading:false,error:null,messages:null,isCheckingAuth:true,message:null,// Signup method\nsignup:async(firstName,lastName,email,phoneNumber,password,avatar)=>{set({isLoading:true,error:null});try{const response=await axios.post('https://gessamusystem1.vercel.app/signup',{firstName,lastName,email,phoneNumber,password,avatar});set({user:response.data.user,isLoading:false,isAuthenticated:true});}catch(error){var _error$response,_error$response$data;set({error:((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||\"Error signing up\",isLoading:false});throw error;}},// Admin Login\nadminLogin:async(email,password)=>{set({isLoading:true,error:null});try{const response=await axios.post('https://gessamusystem1.vercel.app/adminLogin',{email,password});set({admin:response.data.admin,isAuthenticated:true,isLoading:false,error:null});}catch(error){var _error$response2,_error$response2$data;set({error:((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||\"Error logging in\",isLoading:false});throw error;}},// User Login\nlogin:async(email,password)=>{set({isLoading:true,error:null});try{const response=await axios.post(\"\".concat(USER_API,\"/login\"),{email,password});localStorage.setItem(\"token\",response.data.token);set({user:response.data.user,isAuthenticated:true,isLoading:false,error:null});console.log(\"Login Response:\",response.data);}catch(error){var _error$response3,_error$response3$data;set({error:((_error$response3=error.response)===null||_error$response3===void 0?void 0:(_error$response3$data=_error$response3.data)===null||_error$response3$data===void 0?void 0:_error$response3$data.message)||\"Error logging in\",isLoading:false});throw error;}},// Logout \nlogout:async()=>{try{await axios.post('https://gessamusystem1.vercel.app/auth/logout',null,{withCredentials:true});localStorage.removeItem(\"token\");set({user:null,isAuthenticated:false,isCheckingAuth:false});}catch(error){var _error$response4,_error$response4$data;set({error:((_error$response4=error.response)===null||_error$response4===void 0?void 0:(_error$response4$data=_error$response4.data)===null||_error$response4$data===void 0?void 0:_error$response4$data.message)||\"Error logging out\",isLoading:false});throw error;}},// Forgot Password\nforgotPassword:async email=>{set({isLoading:true,error:null});try{const response=await axios.post(\"\".concat(USER_API,\"/password\"),{email});set({message:response.data.message,isLoading:false});}catch(error){var _error$response5,_error$response5$data;set({error:((_error$response5=error.response)===null||_error$response5===void 0?void 0:(_error$response5$data=_error$response5.data)===null||_error$response5$data===void 0?void 0:_error$response5$data.message)||\"Error sending reset password email\",isLoading:false});throw error;}},// Check Auth Status\ncheckAuth:async()=>{set({isCheckingAuth:true,error:null});try{const token=localStorage.getItem(\"token\");const response=await axios.get('https://gessamusystem1.vercel.app/auth/check-auth',{headers:{Authorization:\"Bearer \".concat(token)},withCredentials:true});set({user:response.data.user,isAuthenticated:true,isCheckingAuth:false});}catch(error){var _error$response6,_error$response6$data;set({isAuthenticated:false,isCheckingAuth:false,error:((_error$response6=error.response)===null||_error$response6===void 0?void 0:(_error$response6$data=_error$response6.data)===null||_error$response6$data===void 0?void 0:_error$response6$data.message)||\"Failed to authenticate\"});}},// Get Projects\ngetProjects:async()=>{try{const response=await axios.get(\"\".concat(USER_API,\"/task/takeTask\"));set({tasks:response.data.tasks});}catch(error){console.log(error);}},// Post Task\npostTask:async(title,description,date,level)=>{try{const response=await axios.post(\"\".concat(USER_API,\"/task/makeTask\"),{title,description,date,level});set({task:response.data.task});}catch(error){console.log(error);}},// Post Project\npostProject:async(title,description,year,reference)=>{try{const response=await axios.post(\"\".concat(USER_API,\"/projects/sendprojects\"),{title,description,year,reference});set({project:response.data.project});}catch(error){console.log(error.message);}}}));","map":{"version":3,"names":["create","axios","USER_API","ADM_API","useAuthStore","set","user","isAuthenticated","isLoading","error","messages","isCheckingAuth","message","signup","firstName","lastName","email","phoneNumber","password","avatar","response","post","data","_error$response","_error$response$data","adminLogin","admin","_error$response2","_error$response2$data","login","concat","localStorage","setItem","token","console","log","_error$response3","_error$response3$data","logout","withCredentials","removeItem","_error$response4","_error$response4$data","forgotPassword","_error$response5","_error$response5$data","checkAuth","getItem","get","headers","Authorization","_error$response6","_error$response6$data","getProjects","tasks","postTask","title","description","date","level","task","postProject","year","reference","project"],"sources":["C:/Users/user/Desktop/GIS/client/src/store/auth.js"],"sourcesContent":["import { create } from 'zustand';\r\nimport axios from 'axios';\r\n\r\n// Set your API endpoints\r\nconst USER_API = \"https://gessamusystem1.vercel.app/auth\";\r\nconst ADM_API = \"https://gessamubackend.onrender.com/admin\";\r\n\r\nexport const useAuthStore = create((set) => ({\r\n    user: null,\r\n    isAuthenticated: false,\r\n    isLoading: false,\r\n    error: null,\r\n    messages: null,\r\n    isCheckingAuth: true,\r\n    message: null,\r\n    // Signup method\r\n    signup: async (firstName, lastName, email, phoneNumber, password, avatar) => {\r\n        set({ isLoading: true, error: null });\r\n        try {\r\n            const response = await axios.post('https://gessamusystem1.vercel.app/signup', { firstName, lastName,  email, phoneNumber, password, avatar });\r\n            set({ user: response.data.user, isLoading: false, isAuthenticated: true });\r\n        } catch (error) {\r\n            set({ error: error.response?.data?.message || \"Error signing up\", isLoading: false });\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // Admin Login\r\n    adminLogin: async (email, password) => {\r\n        set({ isLoading: true, error: null });\r\n        try {\r\n            const response = await axios.post('https://gessamusystem1.vercel.app/adminLogin', { email, password });\r\n            set({ admin: response.data.admin, isAuthenticated: true, isLoading: false, error: null });\r\n        } catch (error) {\r\n            set({ error: error.response?.data?.message || \"Error logging in\", isLoading: false });\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // User Login\r\n    login: async (email, password) => {\r\n        set({ isLoading: true, error: null });\r\n        try {\r\n            const response = await axios.post(`${USER_API}/login`, { email, password });\r\n            localStorage.setItem(\"token\", response.data.token);\r\n            set({ user: response.data.user, isAuthenticated: true, isLoading: false, error: null });\r\n            console.log(\"Login Response:\", response.data);\r\n        } catch (error) {\r\n            set({ error: error.response?.data?.message || \"Error logging in\", isLoading: false });\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // Logout \r\n    logout: async () => {\r\n        try { \r\n            await axios.post('https://gessamusystem1.vercel.app/auth/logout', null, { withCredentials: true });\r\n            localStorage.removeItem(\"token\");\r\n            set({ user: null, isAuthenticated: false, isCheckingAuth: false });\r\n        } catch (error) {\r\n            set({ error: error.response?.data?.message || \"Error logging out\", isLoading: false });\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // Forgot Password\r\n    forgotPassword: async (email) => {\r\n        set({ isLoading: true, error: null });\r\n        try {\r\n            const response = await axios.post(`${USER_API}/password`, { email });\r\n            set({ message: response.data.message, isLoading: false });\r\n        } catch (error) {\r\n            set({ error: error.response?.data?.message || \"Error sending reset password email\", isLoading: false });\r\n            throw error;\r\n        }\r\n    },\r\n\r\n    // Check Auth Status\r\n    checkAuth: async () => {\r\n        set({ isCheckingAuth: true, error: null });\r\n        try {\r\n            const token = localStorage.getItem(\"token\");\r\n            const response = await axios.get('https://gessamusystem1.vercel.app/auth/check-auth', {\r\n                headers: { Authorization: `Bearer ${token}` },\r\n                withCredentials: true\r\n            });\r\n            set({ user: response.data.user, isAuthenticated: true, isCheckingAuth: false });\r\n        } catch (error) {\r\n            set({\r\n                isAuthenticated: false,\r\n                isCheckingAuth: false,\r\n                error: error.response?.data?.message || \"Failed to authenticate\",\r\n            });\r\n        }\r\n    },\r\n\r\n    // Get Projects\r\n    getProjects: async () => {\r\n        try {\r\n            const response = await axios.get(`${USER_API}/task/takeTask`);\r\n            set({ tasks: response.data.tasks });\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    },\r\n\r\n    // Post Task\r\n    postTask: async (title, description, date, level) => {\r\n        try {\r\n            const response = await axios.post(`${USER_API}/task/makeTask`, { title, description, date, level });\r\n            set({ task: response.data.task });\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    },\r\n\r\n    // Post Project\r\n    postProject: async (title, description, year, reference) => {\r\n        try {\r\n            const response = await axios.post(`${USER_API}/projects/sendprojects`, { title, description, year, reference });\r\n            set({ project: response.data.project });\r\n        } catch (error) {\r\n            console.log(error.message);\r\n        }\r\n    },\r\n}));\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}