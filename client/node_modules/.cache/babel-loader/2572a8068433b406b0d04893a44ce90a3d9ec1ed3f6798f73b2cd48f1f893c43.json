{"ast":null,"code":"import React,{useEffect,useState}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{useAuthStore}from'./store/auth.js';import axios from'axios';import Login from'./pages/Login.jsx';import Home from'./pages/Home.jsx';import SignUp from'./pages/SignUp.jsx';import AdminLoginPage from'./pages/ADMIN/adminLogin.jsx';import ForgotPassword from'./pages/ForgotPassword.jsx';import Resetpassword from'./pages/Resetpassword.jsx';import Allprojects from'./pages/Allprojects.jsx';import Tasks from'./pages/Tasks.jsx';import Alert from'./pages/Alert.jsx';import Specific from'./pages/Specific.jsx';import OneProject from'./pages/OneProject.jsx';import AdminDashboard from'./pages/ADMIN/AdminDashboard.jsx';import Training from'./pages/Training.jsx';import Settings from'./pages/Settings.jsx';import Profile from'./pages/Profile.jsx';// Protect routes that require authentication\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProtectedRoute=_ref=>{let{children}=_ref;const{isAuthenticated}=useAuthStore();return isAuthenticated?children:/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true});};// Redirect authenticated users to the home page\nconst RedirectAuthenticatedUser=_ref2=>{let{children}=_ref2;const{isAuthenticated}=useAuthStore();return isAuthenticated?/*#__PURE__*/_jsx(Navigate,{to:\"/dashboard\",replace:true}):children;};function App(){const[details,setDetails]=useState(null);const{isCheckingAuth,checkAuth}=useAuthStore();useEffect(()=>{const fetchDetails=async()=>{try{const token=localStorage.getItem(\"token\");if(!token)return console.log(\"No token found. Please log in.\");const response=await axios.get('https://gessamubackend.onrender.com/auth/profile',{headers:{Authorization:\"Bearer \".concat(token)},withCredentials:true});setDetails(response.data);}catch(error){console.log(\"Failed to fetch user details. Please log in.\",error);}};fetchDetails();},[]);useEffect(()=>{checkAuth();},[checkAuth]);// Checking authentication - show loading screen\nif(isCheckingAuth){return/*#__PURE__*/_jsx(\"div\",{className:\" items-center justify-center min-h-screen hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 border-4 border-t-red-600 border-b-green-600 border-l-white border-r-white rounded-full animate-spin\"})});}else{// Main app content after auth check\nreturn/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Home,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(RedirectAuthenticatedUser,{children:/*#__PURE__*/_jsx(Login,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/adminLogin\",element:/*#__PURE__*/_jsx(AdminLoginPage,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(RedirectAuthenticatedUser,{children:/*#__PURE__*/_jsx(SignUp,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/forgot-password\",element:/*#__PURE__*/_jsx(RedirectAuthenticatedUser,{children:/*#__PURE__*/_jsx(ForgotPassword,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/reset-password/:token\",element:/*#__PURE__*/_jsx(RedirectAuthenticatedUser,{children:/*#__PURE__*/_jsx(Resetpassword,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/projects\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Allprojects,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/task\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Tasks,{userId:\"67a20fc8b0d2021b64dc6466\"})})}),/*#__PURE__*/_jsx(Route,{path:\"/alert\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Alert,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/task/:id\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Specific,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/trainings\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Training,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/settings/:id\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Settings,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(Profile,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/project/:id\",element:/*#__PURE__*/_jsx(ProtectedRoute,{children:/*#__PURE__*/_jsx(OneProject,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/adminDashboard\",element:/*#__PURE__*/_jsx(AdminDashboard,{})})]})})});}}export default App;","map":{"version":3,"names":["React","useEffect","useState","BrowserRouter","Router","Routes","Route","Navigate","useAuthStore","axios","Login","Home","SignUp","AdminLoginPage","ForgotPassword","Resetpassword","Allprojects","Tasks","Alert","Specific","OneProject","AdminDashboard","Training","Settings","Profile","jsx","_jsx","jsxs","_jsxs","ProtectedRoute","_ref","children","isAuthenticated","to","replace","RedirectAuthenticatedUser","_ref2","App","details","setDetails","isCheckingAuth","checkAuth","fetchDetails","token","localStorage","getItem","console","log","response","get","headers","Authorization","concat","withCredentials","data","error","className","path","element","userId"],"sources":["C:/Users/user/Desktop/GIS/client/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport { useAuthStore } from './store/auth.js';\nimport axios from 'axios';\n\nimport Login from './pages/Login.jsx';\nimport Home from './pages/Home.jsx';\nimport SignUp from './pages/SignUp.jsx';\nimport AdminLoginPage from './pages/ADMIN/adminLogin.jsx';\nimport ForgotPassword from './pages/ForgotPassword.jsx';\nimport Resetpassword from './pages/Resetpassword.jsx';\nimport Allprojects from './pages/Allprojects.jsx';\nimport Tasks from './pages/Tasks.jsx';\nimport Alert from './pages/Alert.jsx';\nimport Specific from './pages/Specific.jsx';\nimport OneProject from './pages/OneProject.jsx';\nimport AdminDashboard from './pages/ADMIN/AdminDashboard.jsx';\nimport Training from './pages/Training.jsx';\nimport Settings from './pages/Settings.jsx';\nimport Profile from './pages/Profile.jsx';\n\n// Protect routes that require authentication\nconst ProtectedRoute = ({ children }) => {\n  const { isAuthenticated } = useAuthStore();\n  return isAuthenticated ? children : <Navigate to=\"/\" replace />;\n};\n\n// Redirect authenticated users to the home page\nconst RedirectAuthenticatedUser = ({ children }) => {\n  const { isAuthenticated } = useAuthStore();\n  return isAuthenticated ? <Navigate to=\"/dashboard\" replace /> : children;\n};\n\nfunction App() {\n  const [details, setDetails] = useState(null);\n  const { isCheckingAuth, checkAuth } = useAuthStore();\n\n  useEffect(() => {\n    const fetchDetails = async () => {\n      try {\n        const token = localStorage.getItem(\"token\");\n        if (!token) return console.log(\"No token found. Please log in.\");\n\n        const response = await axios.get('https://gessamubackend.onrender.com/auth/profile', {\n          headers: { Authorization: `Bearer ${token}` },\n          withCredentials: true,\n        });\n\n        setDetails(response.data);\n      } catch (error) {\n        console.log(\"Failed to fetch user details. Please log in.\", error);\n      }\n    };\n\n    fetchDetails();\n  }, []);\n\n  useEffect(() => {\n    checkAuth();\n  }, [checkAuth]);\n\n  // Checking authentication - show loading screen\n  if (isCheckingAuth) {\n    return (\n      \n      <div className=\" items-center justify-center min-h-screen hidden\" >\n        <div className=\"w-16 h-16 border-4 border-t-red-600 border-b-green-600 border-l-white border-r-white rounded-full animate-spin\"></div>\n      </div>\n    );\n  } else {\n    // Main app content after auth check\n    return (\n      <Router>\n        <div className=\"App\">\n          {/* ..d */}\n          <Routes>\n            <Route path=\"/dashboard\" element={<ProtectedRoute><Home/></ProtectedRoute>} />\n            <Route path=\"/\" element={<RedirectAuthenticatedUser><Login /></RedirectAuthenticatedUser>} />\n            <Route path=\"/adminLogin\" element={<AdminLoginPage />} />\n            <Route path=\"/signup\" element={<RedirectAuthenticatedUser><SignUp /></RedirectAuthenticatedUser>} />\n            <Route path=\"/forgot-password\" element={<RedirectAuthenticatedUser><ForgotPassword /></RedirectAuthenticatedUser>} />\n            <Route path=\"/reset-password/:token\" element={<RedirectAuthenticatedUser><Resetpassword /></RedirectAuthenticatedUser>} />\n            <Route path=\"/projects\" element={<ProtectedRoute><Allprojects /></ProtectedRoute>} />\n            <Route path=\"/task\" element={<ProtectedRoute><Tasks userId=\"67a20fc8b0d2021b64dc6466\" /></ProtectedRoute>} />\n            <Route path=\"/alert\" element={<ProtectedRoute><Alert  /></ProtectedRoute>} />\n            <Route path=\"/task/:id\" element={<ProtectedRoute><Specific /></ProtectedRoute>} />\n            <Route path=\"/trainings\" element={<ProtectedRoute><Training /></ProtectedRoute>} />\n            <Route path=\"/settings/:id\" element={<ProtectedRoute><Settings /></ProtectedRoute>} />\n            <Route path=\"/profile\" element={<ProtectedRoute><Profile /></ProtectedRoute>} />\n            {/* <Route path=\"/asqQuiz\" element={<ProtectedRoute><Quiz /></ProtectedRoute>} /> */}\n            <Route path=\"/project/:id\" element={<ProtectedRoute><OneProject /></ProtectedRoute>} />\n            <Route path=\"/adminDashboard\" element={<AdminDashboard />} />\n          </Routes>\n        </div>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}