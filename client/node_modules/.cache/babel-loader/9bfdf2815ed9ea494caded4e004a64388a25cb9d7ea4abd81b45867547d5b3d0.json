{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PostWeekly=()=>{const[title,setTitle]=useState('');const[trainer,setTrainer]=useState('');const[description,setDescription]=useState('');const[reference,setReference]=useState('');// Start with one empty reference\nconst[date,setDate]=useState('');const[file,setFile]=useState(null);const[message,setMessage]=useState('');const[error,setError]=useState('');const[loading,setLoading]=useState(false);const handleFileChange=e=>{setFile(e.target.files[0]);};const handleSubmit=async e=>{e.preventDefault();setError('');setMessage('');setLoading(true);if(!title||!trainer||!description||!date||!file||reference.length===0){setError('All fields are required');setLoading(false);return;}try{const formData=new FormData();formData.append('title',title);formData.append('trainer',trainer);formData.append('description',description);formData.append('reference',reference);// Send reference as a JSON string\nformData.append('date',date);formData.append('file',file);await axios.post('http://localhost:5000/projects/weekly-projects',formData,{headers:{'Content-Type':'multipart/form-data'}});setMessage('Weekly project submitted successfully!');setTitle('');setTrainer('');setDescription('');setReference();setDate('');setFile(null);}catch(error){var _error$response,_error$response$data;setError(((_error$response=error.response)===null||_error$response===void 0?void 0:(_error$response$data=_error$response.data)===null||_error$response$data===void 0?void 0:_error$response$data.message)||'Failed to submit the project.');}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen w-full  flex items-center justify-center p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow-lg rounded-lg p-6 w-full max-w-lg\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-center mb-4\",children:\"Post Weekly Project\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-center mb-4\",children:error}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"text-green-500 text-center mb-4\",children:message}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium\",children:\"Project Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title,onChange:e=>setTitle(e.target.value),className:\"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300\",placeholder:\"Enter project title\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium\",children:\"Trainer\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:trainer,onChange:e=>setTrainer(e.target.value),className:\"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300\",placeholder:\"Enter trainer's name\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium\",children:\"Description\"}),/*#__PURE__*/_jsx(\"textarea\",{value:description,onChange:e=>setDescription(e.target.value),className:\"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300\",placeholder:\"Enter project description\",rows:\"4\",required:true})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:reference,onChange:e=>setReference(e.target.value),className:\"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300\",placeholder:\"reference links\",required:true})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium\",children:\"Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:date,onChange:e=>setDate(e.target.value),className:\"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block font-medium\",children:\"Upload File\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:handleFileChange,className:\"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300 \".concat(loading?'opacity-50 cursor-not-allowed':''),disabled:loading,children:loading?'Submitting...':'Submit'})]})]})});};export default PostWeekly;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","PostWeekly","title","setTitle","trainer","setTrainer","description","setDescription","reference","setReference","date","setDate","file","setFile","message","setMessage","error","setError","loading","setLoading","handleFileChange","e","target","files","handleSubmit","preventDefault","length","formData","FormData","append","post","headers","_error$response","_error$response$data","response","data","className","children","onSubmit","type","value","onChange","placeholder","required","rows","concat","disabled"],"sources":["C:/Users/user/Desktop/GIS/client/src/pages/ADMIN/PostWeekly.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst PostWeekly = () => {\r\n    const [title, setTitle] = useState('');\r\n    const [trainer, setTrainer] = useState('');\r\n    const [description, setDescription] = useState('');\r\n    const [reference, setReference] = useState(''); // Start with one empty reference\r\n    const [date, setDate] = useState('');\r\n    const [file, setFile] = useState(null);\r\n    const [message, setMessage] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleFileChange = (e) => {\r\n        setFile(e.target.files[0]);\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setError('');\r\n        setMessage('');\r\n        setLoading(true);\r\n\r\n        if (!title || !trainer || !description || !date || !file || reference.length === 0) {\r\n            setError('All fields are required');\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const formData = new FormData();\r\n            formData.append('title', title);\r\n            formData.append('trainer', trainer);\r\n            formData.append('description', description);\r\n            formData.append('reference', reference); // Send reference as a JSON string\r\n            formData.append('date', date);\r\n            formData.append('file', file);\r\n\r\n            await axios.post('http://localhost:5000/projects/weekly-projects', formData, {\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data',\r\n                },\r\n            });\r\n\r\n            setMessage('Weekly project submitted successfully!');\r\n            setTitle('');\r\n            setTrainer('');\r\n            setDescription('');\r\n            setReference();\r\n            setDate('');\r\n            setFile(null);\r\n        } catch (error) {\r\n            setError(error.response?.data?.message || 'Failed to submit the project.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen w-full  flex items-center justify-center p-4\">\r\n            <div className=\"bg-white shadow-lg rounded-lg p-6 w-full max-w-lg\">\r\n                <h2 className=\"text-2xl font-bold text-center mb-4\">Post Weekly Project</h2>\r\n\r\n                {error && <p className=\"text-red-500 text-center mb-4\">{error}</p>}\r\n                {message && <p className=\"text-green-500 text-center mb-4\">{message}</p>}\r\n\r\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                    <div>\r\n                        <label className=\"block font-medium\">Project Title</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={title}\r\n                            onChange={(e) => setTitle(e.target.value)}\r\n                            className=\"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300\"\r\n                            placeholder=\"Enter project title\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block font-medium\">Trainer</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={trainer}\r\n                            onChange={(e) => setTrainer(e.target.value)}\r\n                            className=\"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300\"\r\n                            placeholder=\"Enter trainer's name\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block font-medium\">Description</label>\r\n                        <textarea\r\n                            value={description}\r\n                            onChange={(e) => setDescription(e.target.value)}\r\n                            className=\"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300\"\r\n                            placeholder=\"Enter project description\"\r\n                            rows=\"4\"\r\n                            required\r\n                        ></textarea>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <input\r\n                            type=\"text\"\r\n                            value={reference}\r\n                            onChange={(e) => setReference(e.target.value)}\r\n                            className=\"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300\"\r\n                            placeholder=\"reference links\"\r\n                            required\r\n                        />\r\n                    </div>\r\n                        {/* {reference.map((ref, index) => (\r\n                            <div key={index} className=\"flex items-center space-x-2\">\r\n                                <input\r\n                                    type=\"text\"\r\n                                    value={ref}\r\n                                    onChange={(e) => handleReferenceChange(index, e.target.value)}\r\n                                    className=\"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300\"\r\n                                    placeholder=\"Enter reference\"\r\n                                />\r\n                                {index > 0 && (\r\n                                    <button\r\n                                        type=\"button\"\r\n                                        onClick={() => handleRemoveReference(index)}\r\n                                        className=\"text-red-500\"\r\n                                    >\r\n                                        Remove\r\n                                    </button>\r\n                                )}\r\n                            </div>\r\n                        ))} */}\r\n                        {/* <button\r\n                            type=\"button\"\r\n                            onClick={handleAddReference}\r\n                            className=\"text-blue-500 mt-2\"\r\n                        >\r\n                            Add another reference\r\n                        </button>\r\n                    </div> */}\r\n\r\n                    <div>\r\n                        <label className=\"block font-medium\">Date</label>\r\n                        <input\r\n                            type=\"date\"\r\n                            value={date}\r\n                            onChange={(e) => setDate(e.target.value)}\r\n                            className=\"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <div>\r\n                        <label className=\"block font-medium\">Upload File</label>\r\n                        <input\r\n                            type=\"file\"\r\n                            onChange={handleFileChange}\r\n                            className=\"w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-300\"\r\n                        />\r\n                    </div>\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        className={`w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300 ${loading ? 'opacity-50 cursor-not-allowed' : ''\r\n                            }`}\r\n                        disabled={loading}\r\n                    >\r\n                        {loading ? 'Submitting...' : 'Submit'}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default PostWeekly;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}