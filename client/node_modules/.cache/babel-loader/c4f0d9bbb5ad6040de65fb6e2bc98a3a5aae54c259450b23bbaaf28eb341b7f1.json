{"ast":null,"code":"import React,{useState}from\"react\";import{useNavigate,useParams}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ResetPassword=()=>{const[password,setPassword]=useState(\"\");const[confirmPassword,setConfirmPassword]=useState(\"\");const[showPassword,setShowPassword]=useState(false);const[message,setMessage]=useState(\"\");const[error,setError]=useState(\"\");const[isLoading,setIsLoading]=useState(false);const{token}=useParams();// Get token from URL params\nconst navigate=useNavigate();const handleSubmit=async e=>{e.preventDefault();if(password!==confirmPassword){setError(\"Passwords do not match.\");return;}try{setIsLoading(true);setError(\"\");const response=await axios.post(\"https://gessamubackend.onrender.com/auth/reset-password/\".concat(token),{password});setMessage(response.data.message);setTimeout(()=>navigate(\"/\"),2000);// Redirect to login after 3 seconds\n}catch(err){setError(err.response&&err.response.data&&err.response.data.message?err.response.data.message:\"An error occurred. Please try again.\");}finally{setIsLoading(false);}};const togglePasswordVisibility=()=>{setShowPassword(prev=>!prev);};const isButtonDisabled=isLoading||password!==confirmPassword||password.length===0;return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center justify-center min-h-screen bg-gray-100\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-6\",children:\"Reset Password\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"bg-white p-6 rounded shadow-md w-80\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative w-full mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?\"text\":\"password\",placeholder:\"New Password\",value:password,onChange:e=>setPassword(e.target.value),className:\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:togglePasswordVisibility,className:\"absolute right-2 top-2 text-gray-500 hover:text-gray-700\",children:showPassword?\"Hide\":\"Show\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"relative w-full mb-4\",children:/*#__PURE__*/_jsx(\"input\",{type:showPassword?\"text\":\"password\",placeholder:\"Confirm Password\",value:confirmPassword,onChange:e=>setConfirmPassword(e.target.value),className:\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400\",required:true})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full p-2 text-white rounded \".concat(isButtonDisabled?\"bg-blue-300\":\"bg-blue-500 hover:bg-blue-600\"),disabled:isButtonDisabled,children:isLoading?\"Resetting...\":\"Reset Password\"}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"text-green-500 text-sm mt-4\",children:message}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mt-4\",children:error})]})]});};export default ResetPassword;","map":{"version":3,"names":["React","useState","useNavigate","useParams","axios","jsx","_jsx","jsxs","_jsxs","ResetPassword","password","setPassword","confirmPassword","setConfirmPassword","showPassword","setShowPassword","message","setMessage","error","setError","isLoading","setIsLoading","token","navigate","handleSubmit","e","preventDefault","response","post","concat","data","setTimeout","err","togglePasswordVisibility","prev","isButtonDisabled","length","className","children","onSubmit","type","placeholder","value","onChange","target","required","onClick","disabled"],"sources":["C:/Users/user/Desktop/GIS/client/src/pages/Resetpassword.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nconst ResetPassword = () => {\r\n    const [password, setPassword] = useState(\"\");\r\n    const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n    const [showPassword, setShowPassword] = useState(false);\r\n    const [message, setMessage] = useState(\"\");\r\n    const [error, setError] = useState(\"\");\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const { token } = useParams(); // Get token from URL params\r\n    const navigate = useNavigate();\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        if (password !== confirmPassword) {\r\n            setError(\"Passwords do not match.\");\r\n            return;\r\n        }\r\n\r\n        try {\r\n            setIsLoading(true);\r\n            setError(\"\");\r\n            const response = await axios.post(\r\n                `https://gessamubackend.onrender.com/auth/reset-password/${token}`,\r\n                { password }\r\n            );\r\n            setMessage(response.data.message);\r\n            setTimeout(() => navigate(\"/\"), 2000); // Redirect to login after 3 seconds\r\n        } catch (err) {\r\n            setError(\r\n                err.response && err.response.data && err.response.data.message\r\n                    ? err.response.data.message\r\n                    : \"An error occurred. Please try again.\"\r\n            );\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const togglePasswordVisibility = () => {\r\n        setShowPassword((prev) => !prev);\r\n    };\r\n\r\n    const isButtonDisabled = isLoading || password !== confirmPassword || password.length === 0;\r\n\r\n    return (\r\n        <div className=\"flex flex-col items-center justify-center min-h-screen bg-gray-100\">\r\n            <h2 className=\"text-2xl font-bold mb-6\">Reset Password</h2>\r\n            <form onSubmit={handleSubmit} className=\"bg-white p-6 rounded shadow-md w-80\">\r\n                <div className=\"relative w-full mb-4\">\r\n                    <input\r\n                        type={showPassword ? \"text\" : \"password\"}\r\n                        placeholder=\"New Password\"\r\n                        value={password}\r\n                        onChange={(e) => setPassword(e.target.value)}\r\n                        className=\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n                        required\r\n                    />\r\n                    <button\r\n                        type=\"button\"\r\n                        onClick={togglePasswordVisibility}\r\n                        className=\"absolute right-2 top-2 text-gray-500 hover:text-gray-700\"\r\n                    >\r\n                        {showPassword ? \"Hide\" : \"Show\"}\r\n                    </button>\r\n                </div>\r\n                <div className=\"relative w-full mb-4\">\r\n                    <input\r\n                        type={showPassword ? \"text\" : \"password\"}\r\n                        placeholder=\"Confirm Password\"\r\n                        value={confirmPassword}\r\n                        onChange={(e) => setConfirmPassword(e.target.value)}\r\n                        className=\"w-full p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-400\"\r\n                        required\r\n                    />\r\n                </div>\r\n                <button\r\n                    type=\"submit\"\r\n                    className={`w-full p-2 text-white rounded ${isButtonDisabled ? \"bg-blue-300\" : \"bg-blue-500 hover:bg-blue-600\"}`}\r\n                    disabled={isButtonDisabled}\r\n                >\r\n                    {isLoading ? \"Resetting...\" : \"Reset Password\"}\r\n                </button>\r\n                {message && <p className=\"text-green-500 text-sm mt-4\">{message}</p>}\r\n                {error && <p className=\"text-red-500 text-sm mt-4\">{error}</p>}\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ResetPassword;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}