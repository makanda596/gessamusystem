{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useAuthStore}from'../store/auth';import logo from'../assets/logo.jpg';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ForgotPassword=()=>{const[email,setEmail]=useState('');const[message,setMessage]=useState('');const[error,setError]=useState('');const[loading,setLoading]=useState(false);// Loading state\nconst[retryTimer,setRetryTimer]=useState(0);// Timer for retry\nconst{forgotPassword}=useAuthStore();// Countdown effect for retryTimer\nuseEffect(()=>{if(retryTimer>0){const timer=setInterval(()=>setRetryTimer(prev=>prev-1),1000);return()=>clearInterval(timer);}},[retryTimer]);const handleSubmit=async e=>{e.preventDefault();setLoading(true);// Start loading\ntry{await forgotPassword(email);setMessage('Check your email to reset your password.');setError('');setRetryTimer(60);// Start 1-minute cooldown\n}catch(err){setError(err.response?err.response.data.message:'Something went wrong');setMessage('');}finally{setLoading(false);// Stop loading\n}};const handleRetry=()=>{setMessage('');setError('');setRetryTimer(0);// Reset timer\n};return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-blue-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow-lg rounded-lg p-4 w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-6\",children:/*#__PURE__*/_jsx(\"img\",{src:logo// Replace with the correct path to your logo\n,alt:\"Logo\",className:\"w-20 h-20\"})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold text-center mb-4\",children:\"Forgot Password\"}),message&&/*#__PURE__*/_jsx(\"p\",{className:\"text-green-500 text-center mb-4\",children:message}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-center mb-4\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-gray-700 font-medium mb-2\",children:\"Enter Your Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:email,onChange:e=>setEmail(e.target.value),className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300\",placeholder:\"Email Address\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring focus:ring-blue-300\",disabled:loading||retryTimer>0// Disable button if loading or in cooldown\n,children:loading?'Processing...':'Reset Password'})]}),retryTimer>0?/*#__PURE__*/_jsxs(\"p\",{className:\"text-gray-500 text-center mt-4\",children:[\"You can retry in \",retryTimer,\" seconds.\"]}):message&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700\",children:\"Didn't receive the email?\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleRetry,className:\"text-blue-600 underline mt-2 focus:outline-none\",children:\"Retry the process\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-4\",children:/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"/\",className:\"text-blue-600 underline\",children:\"Remembered your password? Login here.\"})})})]})});};export default ForgotPassword;","map":{"version":3,"names":["React","useState","useEffect","useAuthStore","logo","jsx","_jsx","jsxs","_jsxs","ForgotPassword","email","setEmail","message","setMessage","error","setError","loading","setLoading","retryTimer","setRetryTimer","forgotPassword","timer","setInterval","prev","clearInterval","handleSubmit","e","preventDefault","err","response","data","handleRetry","className","children","src","alt","onSubmit","type","value","onChange","target","placeholder","required","disabled","onClick","href"],"sources":["C:/Users/user/Desktop/GIS/client/src/pages/ForgotPassword.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useAuthStore } from '../store/auth';\r\nimport logo from '../assets/logo.jpg'\r\n\r\nconst ForgotPassword = () => {\r\n    const [email, setEmail] = useState('');\r\n    const [message, setMessage] = useState('');\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false); // Loading state\r\n    const [retryTimer, setRetryTimer] = useState(0); // Timer for retry\r\n    const { forgotPassword } = useAuthStore();\r\n\r\n    // Countdown effect for retryTimer\r\n    useEffect(() => {\r\n        if (retryTimer > 0) {\r\n            const timer = setInterval(() => setRetryTimer((prev) => prev - 1), 1000);\r\n            return () => clearInterval(timer);\r\n        }\r\n    }, [retryTimer]);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        setLoading(true); // Start loading\r\n        try {\r\n            await forgotPassword(email);\r\n            setMessage('Check your email to reset your password.');\r\n            setError('');\r\n            setRetryTimer(60); // Start 1-minute cooldown\r\n        } catch (err) {\r\n            setError(err.response ? err.response.data.message : 'Something went wrong');\r\n            setMessage('');\r\n        } finally {\r\n            setLoading(false); // Stop loading\r\n        }\r\n    };\r\n\r\n    const handleRetry = () => {\r\n        setMessage('');\r\n        setError('');\r\n        setRetryTimer(0); // Reset timer\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-blue-500\">\r\n            <div className=\"bg-white shadow-lg rounded-lg p-4 w-full max-w-md\">\r\n                <div className=\"flex justify-center mb-6\">\r\n                    <img\r\n                        src={logo} // Replace with the correct path to your logo\r\n                        alt=\"Logo\"\r\n                        className=\"w-20 h-20\"\r\n                    />\r\n                </div>\r\n\r\n                <h2 className=\"text-xl font-semibold text-center mb-4\">Forgot Password</h2>\r\n\r\n                {/* Success or Error Message */}\r\n                {message && <p className=\"text-green-500 text-center mb-4\">{message}</p>}\r\n                {error && <p className=\"text-red-500 text-center mb-4\">{error}</p>}\r\n\r\n                {/* Forgot Password Form */}\r\n                <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                    <div>\r\n                        <label className=\"block text-gray-700 font-medium mb-2\">Enter Your Email</label>\r\n                        <input\r\n                            type=\"email\"\r\n                            value={email}\r\n                            onChange={(e) => setEmail(e.target.value)}\r\n                            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-blue-300\"\r\n                            placeholder=\"Email Address\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        className=\"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 focus:outline-none focus:ring focus:ring-blue-300\"\r\n                        disabled={loading || retryTimer > 0} // Disable button if loading or in cooldown\r\n                    >\r\n                        {loading ? 'Processing...' : 'Reset Password'}\r\n                    </button>\r\n                </form>\r\n\r\n                {/* Didn't receive email and retry option */}\r\n                {retryTimer > 0 ? (\r\n                    <p className=\"text-gray-500 text-center mt-4\">\r\n                        You can retry in {retryTimer} seconds.\r\n                    </p>\r\n                ) : (\r\n                    message && (\r\n                        <div className=\"text-center mt-4\">\r\n                            <p className=\"text-gray-700\">Didn't receive the email?</p>\r\n                            <button\r\n                                onClick={handleRetry}\r\n                                className=\"text-blue-600 underline mt-2 focus:outline-none\"\r\n                            >\r\n                                Retry the process\r\n                            </button>\r\n                        </div>\r\n                    )\r\n                )}\r\n\r\n                <div className=\"text-center mt-4\">\r\n                    <p>\r\n                        <a href=\"/\" className=\"text-blue-600 underline\">Remembered your password? Login here.</a>\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ForgotPassword;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}